{% extends "base.html" %}
{% block head_ext %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap-datetimepicker.min.css') }}">
{% endblock %}
{% block content %}

<h2>User {{ email }}</h2>

<div class="row">
    <div class="col-sm-4">
        <h4>Devices
            <small>#{{ devices|length }}</small>
        </h4>
        <div class="list-group">
            {% for device in devices %}
            <span class="list-group-item">
                <h4 class="list-group-item-heading">{{ device.model }}
                    <small>{{ device.manufacturer }}</small>
                </h4>
                <p class="list-group-item-text">{{ device.type }} <a
                        href="./remove?device={{ device.deviceId }}">remove</a></p>
            </span>
            {% else %}
            <span class="list-group-item">
                <h4 class="list-group-item-heading">no devices found</h4>
            </span>
            {% endfor %}
        </div>
    </div>

    <div class="col-sm-4">
        <h4>Send Message</h4>

        <form method="post" action="/send">
            <input type="hidden" name="email" value="{{ email }}" class="form-control">

            <div class="form-group">
                <input type="text" name="title" id="title" placeholder="title" class="form-control">
            </div>
            <div class="form-group">
                <input type="text" name="text" id="text" placeholder="message" class="form-control" required>
            </div>
            <div class="form-group">
                <input type="url" name="canonicalUrl" id="canonicalUrl" placeholder="url" class="form-control">
            </div>

            <div class="form-group">
                <label class="control-label" for="inputAddress">Date time</label>

                <div class='input-group date' id='datetimepicker1'>
                    <input type='text' class="form-control"/>
                    <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>

            <div class="form-group">
                <label class="control-label" for="inputAddress">Address</label>

                <div class="controls">
                    <input type="text" autocomplete="off" class="inputAddress form-control" id="inputAddress"
                           placeholder="Type in your address">
                </div>
            </div>

            <input id="lat" type="hidden"> <br/>
            <input id="lng" type="hidden"> <br/>

            <button type="submit" class="btn btn-default">
                <span class="glyphicon glyphicon-send"></span>
                Send
            </button>
        </form>
    </div>
</div>

{% endblock %}

{% block js_footer_ext %}
<script src="//maps.google.com/maps/api/js?sensor=false"></script>
<script src="{{ url_for('static', filename='js/jquery.addressPicker.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-typeahead.js') }}"></script>


<script type="text/javascript">
  $(function() {
    $('#datetimepicker1').datetimepicker({
      startDate: new Date(),
      language: 'en'
    });

  $('#inputAddress').addressPicker({
		  boundElements: {
		    '#lat': 'lat',
		    '#lng': 'lng',
		  }
		});

    });

</script>

<script src="{{ url_for('static', filename='js/moment.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap-datetimepicker.js') }}"></script>

{% endblock %}